{% extends "base.html" %}

{% block title %}Readsr - {{ city_site.city_and_state }}{% endblock title %}

{% block content %}

<div id="banner">
	<h2>Upcoming readings in {{ city_site.city}}, {{ city_site.state }}</h2>

<div id="choose_date">
	<form name="submit_dates" action="{% url index %}" method="get">
		<!-- First, set up the controls for the list view -->
		<input name="start" id="datepicker_start" class="list_controls" type="text" {% if not js_available %}value="{{ start_date }}"{% endif %} />
		<span class="list_controls">to</span>
		<input name="end" id="datepicker_end" class="list_controls" type="text" {% if not js_available %}value="{{ end_date }}"{% endif %} /></span>
	
		<a href="#NextWeek" id="next_week" class="list_controls">One Week</a>
		<a href="#NextMonth" id="next_month" class="list_controls">One Month</a>

		<!-- Then set up the controls for the calendar view -->
		<a href="#CalPreviousYear" id="previous_year" class="calendar_controls">&lt;&lt;</a>
		<a href="#CalPreviousMonth" id="previous_month" class="calendar_controls">&lt;</a>
		<span id="cal_name" class="calendar_controls">{{ cal_name }}</span>
		<a href="#CalNextMonth" id="next_month" class="calendar_controls">&gt;</a>
		<a href="#CalNextYear" id="next_year" class="calendar_controls">&gt;&gt;</a>

		<input id="calendar_view" class="select_view_type list_controls" type="submit" name="list_view" value="Calendar" />
		<input id="list_view" class="select_view_type calendar_controls" type="submit" name="list_view" value="List" />
	</form>
</div>
</div>

	<div id="reading_list">
		<img id="load_image" src="media/spinner-large.gif">
		{% if list_view %}
			{% include "list_readings.html" %}
		{% else %}
			{% include "calendar_snippet.html" %}
		{% endif %}

	</div>

{% endblock content %}

{% block script %}
{{ super.script }}
<script type="text/javascript">
// set the initial viewing controls
{% if list_view %}
	$(".calendar_controls").hide();
{% else %}
	$(".list_controls").hide();
{% endif %}
</script>

<script type="text/javascript" src="media/js/datepickerscript.js"></script>
<script type="text/javascript">
start.datepicker("setDate", "{{ start_date }}");
end.datepicker("setDate", "{{ end_date }}");
</script>
{% endblock script %}